# NOWPayments Integration for WordPress

## Описание плагина

**Название плагина**: NOWPayments Integration  
**Описание**: Плагин для интеграции API NOWPayments с WordPress, позволяющий пользователям совершать платежи за товары и услуги через NOWPayments.  
**Версия**: 1.0  
**Автор**: Dmitrij Shirokij  

## Функциональность плагина

Плагин обеспечивает следующие функции:

1. **Создание заказов**: Плагин создает таблицу заказов в базе данных для хранения информации о платежах, включая статус, сумму и детали пользователя.
  
2. **Отправка уведомлений по электронной почте**: После создания заказа пользователю отправляется электронное письмо с подтверждением, используя настраиваемый шаблон.

3. **Интеграция с NOWPayments API**: Плагин обрабатывает запросы к NOWPayments для создания платежей и обработки уведомлений о статусе платежей (IPN).

4. **Имитация платежей**: Для администраторов плагин может эмулировать успешные платежи, чтобы упростить тестирование.

5. **Обработка статуса платежей**: Плагин обновляет статус заказа в зависимости от ответа от NOWPayments и выполняет соответствующие действия (например, активация постов, отправка уведомлений).

6. **Создание административной страницы для заказов**: Плагин добавляет страницу "Orders" в меню админки WordPress, где администратор может управлять заказами, просматривать информацию по заказам и имитировать платежи..

## Разбор кода
- **Создание таблицы заказов**: Использует функции базы данных WordPress для создания и управления пользовательской таблицей заказов при активации плагина.
- **Создание платежа**: Реализует функции AJAX для создания запросов на платеж и безопасной обработки пользовательских данных.
- **Обратный вызов IPN**: Регистрирует конечную точку REST API для обработки входящих уведомлений о платежах от NOWPayments.
- **Функциональность электронной почты**: Включает функцию для отправки подтверждений по электронной почте с настраиваемым шаблоном, включенным в директорию плагина.
- **Безопасность**: Обеспечивает безопасность через проверку nonce и проверки HMAC для обратных вызовов, защищая от несанкционированного доступа.
- **Создание страницы заказов в админке**: Функция np_add_admin_page() создает страницу "Orders" в меню администратора. На этой странице администратор может просматривать заказы.

Плагин используется как модуль для темы Pumb.Black.

<img src="https://github.com/DmitriyChiroky/wp-plugins-new/blob/main/nowpayments-integration/payment-page.jpg" alt="image">
<img src="https://github.com/DmitriyChiroky/wp-plugins-new/blob/main/nowpayments-integration/np-orders-page.jpg" alt="image">
<img src="https://github.com/DmitriyChiroky/wp-plugins-new/blob/main/nowpayments-integration/order-page-front.jpg" alt="image">






